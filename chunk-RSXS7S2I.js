import{a as Z}from"./chunk-QJWNW2UT.js";import{a as yn,b as En,f as wn}from"./chunk-O5NQGR6Y.js";import{b as Tn,c as bn}from"./chunk-AEJKBHJU.js";import"./chunk-2KVZ3OMB.js";import"./chunk-BG7J6D2R.js";import{a as Nn,b as Sn}from"./chunk-NVF4OF4Z.js";import{a as dn,b as fn}from"./chunk-2HFERSQ4.js";import{f as kn,h as Dn}from"./chunk-CRCAE7O6.js";import{h as tn,m as on,n as rn,q as an,r as mn,s as cn,t as sn,u as ln,v as pn,w as un}from"./chunk-4KNL4DGZ.js";import"./chunk-PM7RRKYB.js";import{c as K,d as Ye}from"./chunk-YIYQWAB7.js";import{$a as We,Cb as Mn,Da as F,Db as J,Ea as I,Ga as U,Ha as W,Qa as qe,Sa as $e,X as Ue,Y as Be,Z as Ve,Za as He,_a as Qe,ab as Ke,bb as Ze,cb as Je,l as ye,m as b,n as Ee,na as Re,nb as en,o as Te,oa as Le,ob as nn,rb as gn,s as be,sb as zn,tb as _n,u as ke,ub as Cn,v as De,vb as hn,w as Ne,wb as vn,x as Se,xa as je,xb as On,y as we,yb as Pn,z as Ae,zb as xn}from"./chunk-UMM7N7DW.js";import{Ab as g,Fb as me,Gb as ce,Hb as se,Ic as Me,K as O,Ka as o,L as ge,Lb as h,Ld as Ie,Mb as s,Nb as P,Oa as C,Ob as M,S as L,Ta as N,Ua as S,Va as _e,Xa as oe,Xc as Fe,Za as u,Zb as le,Zc as H,Zd as Ge,_ as D,_b as pe,_d as Xe,ab as re,ad as G,ba as ze,bb as c,cb as Ce,cc as v,d as te,db as ae,eb as he,fb as ve,gc as w,ie as ue,j as ie,ja as d,je as A,k as R,ka as f,kb as $,ke as Q,nc as Oe,pb as a,qa as q,qb as r,rb as p,sb as E,tb as T,va as j,vb as x,yb as _,yc as Pe,zc as xe}from"./chunk-COQ5IRDM.js";import{a as fe}from"./chunk-GAL4ENT6.js";var Ln=["okBtn"],jn=["cancelBtn"];function Gn(n,t){n&1&&(a(0,"div",6),p(1,"span",14),r())}function Xn(n,t){if(n&1&&(E(0),a(1,"span",17),p(2,"nz-icon",18),r(),T()),n&2){let e=t.$implicit;o(2),c("nzType",e||"exclamation-circle")}}function qn(n,t){if(n&1&&(E(0),u(1,Xn,3,1,"ng-container",15),a(2,"div",16),s(3),r(),T()),n&2){let e=g(2);o(),c("nzStringTemplateOutlet",e.nzIcon),o(2),P(e.nzTitle)}}function $n(n,t){if(n&1&&s(0),n&2){let e=g(2);M(" ",e.nzCancelText," ")}}function Hn(n,t){n&1&&(s(0),le(1,"nzI18n")),n&2&&M(" ",pe(1,1,"Modal.cancelText")," ")}function Qn(n,t){if(n&1&&s(0),n&2){let e=g(2);M(" ",e.nzOkText," ")}}function Wn(n,t){n&1&&(s(0),le(1,"nzI18n")),n&2&&M(" ",pe(1,1,"Modal.okText")," ")}function Kn(n,t){if(n&1){let e=x();a(0,"div",4)(1,"div",5),u(2,Gn,2,0,"div",6),a(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),u(7,qn,4,2,"ng-container",10),r(),a(8,"div",11)(9,"button",12,1),_("click",function(){d(e);let m=g();return f(m.onCancel())}),u(11,$n,1,1)(12,Hn,2,3),r(),a(13,"button",13,2),_("click",function(){d(e);let m=g();return f(m.onConfirm())}),u(15,Qn,1,1)(16,Wn,2,3),r()()()()()()()}if(n&2){let e=g();he(e.nzOverlayStyle),ve(e._classMap),ae("ant-popover-rtl",e.dir==="rtl"),c("cdkTrapFocusAutoCapture",e.nzAutoFocus!==null)("@.disabled",!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),o(2),$(e.nzPopconfirmShowArrow?2:-1),o(5),c("nzStringTemplateOutlet",e.nzTitle)("nzStringTemplateOutletContext",e.nzTitleContext),o(2),c("nzSize","small"),re("cdkFocusInitial",e.nzAutoFocus==="cancel"||null),o(2),$(e.nzCancelText?11:12),o(2),c("nzSize","small")("nzType",e.nzOkType!=="danger"?e.nzOkType:"primary")("nzDanger",e.nzOkDanger||e.nzOkType==="danger")("nzLoading",e.confirmLoading)("disabled",e.nzOkDisabled),re("cdkFocusInitial",e.nzAutoFocus==="ok"||null),o(2),$(e.nzOkText?15:16)}}var Zn="popconfirm",Wt=(()=>{let n=gn,t,e=[],i=[],m,l=[],k=[];return class de extends n{static{let y=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;t=[ue()],m=[ue()],ie(null,null,t,{kind:"field",name:"nzPopconfirmBackdrop",static:!1,private:!1,access:{has:z=>"nzPopconfirmBackdrop"in z,get:z=>z.nzPopconfirmBackdrop,set:(z,V)=>{z.nzPopconfirmBackdrop=V}},metadata:y},e,i),ie(null,null,m,{kind:"field",name:"nzAutofocus",static:!1,private:!1,access:{has:z=>"nzAutofocus"in z,get:z=>z.nzAutofocus,set:(z,V)=>{z.nzAutofocus=V}},metadata:y},l,k),y&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y})}_nzModuleName=Zn;arrowPointAtCenter;title;titleContext=null;directiveTitle;trigger="click";placement="top";origin;mouseEnterDelay;mouseLeaveDelay;overlayClassName;overlayStyle;visible;nzOkText;nzOkType;nzOkDisabled;nzOkDanger;nzCancelText;nzBeforeConfirm;nzIcon;nzCondition=!1;nzPopconfirmShowArrow=!0;nzPopconfirmBackdrop=R(this,e,!1);nzAutofocus=(R(this,i),R(this,l,null));directiveContent=(R(this,k),null);content=null;overlayClickable;visibleChange=new q;nzOnCancel=new q;nzOnConfirm=new q;getProxyPropertyMap(){return fe({nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzPopconfirmContext:["nzTitleContext",()=>this.titleContext],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus]},super.getProxyPropertyMap())}constructor(){super(Bn)}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe(L(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe(L(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static \u0275fac=function(z){return new(z||de)};static \u0275dir=_e({type:de,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(z,V){z&2&&ae("ant-popover-open",V.visible)},inputs:{arrowPointAtCenter:[2,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter",w],title:[0,"nzPopconfirmTitle","title"],titleContext:[0,"nzPopconfirmTitleContext","titleContext"],directiveTitle:[0,"nz-popconfirm","directiveTitle"],trigger:[0,"nzPopconfirmTrigger","trigger"],placement:[0,"nzPopconfirmPlacement","placement"],origin:[0,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[0,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[0,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[0,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[0,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[0,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:[2,"nzOkDisabled","nzOkDisabled",w],nzOkDanger:[2,"nzOkDanger","nzOkDanger",w],nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:[2,"nzCondition","nzCondition",w],nzPopconfirmShowArrow:[2,"nzPopconfirmShowArrow","nzPopconfirmShowArrow",w],nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],features:[oe]})}})(),Bn=(()=>{class n extends _n{elementRef;okBtn;cancelBtn;nzCancelText;nzCondition=!1;nzPopconfirmShowArrow=!0;nzIcon;nzOkText;nzOkType="primary";nzOkDanger=!1;nzOkDisabled=!1;nzAutoFocus=null;nzBeforeConfirm=null;nzOnCancel=new te;nzOnConfirm=new te;_trigger="click";elementFocusedBeforeModalWasOpened=null;document=ze(Oe);_prefix="ant-popover";confirmLoading=!1;constructor(e){super(),this.elementRef=e}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){let e=Ie(this.nzBeforeConfirm()).pipe(ge());this.confirmLoading=!0,e.pipe(O(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),L(this.nzVisibleChange),L(this.destroy$)).subscribe(i=>{i&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){let e=this.elementFocusedBeforeModalWasOpened;if(e&&typeof e.focus=="function"){let i=this.document.activeElement,m=this.elementRef.nativeElement;(!i||i===this.document.body||i===m||m.contains(i))&&e.focus()}}static \u0275fac=function(i){return new(i||n)(C(j))};static \u0275cmp=N({type:n,selectors:[["nz-popconfirm"]],viewQuery:function(i,m){if(i&1&&(me(Ln,5,j),me(jn,5,j)),i&2){let l;ce(l=se())&&(m.okBtn=l),ce(l=se())&&(m.cancelBtn=l)}},exportAs:["nzPopconfirmComponent"],features:[oe],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nzTheme","fill",3,"nzType"]],template:function(i,m){if(i&1){let l=x();u(0,Kn,17,23,"ng-template",3,0,v),_("overlayOutsideClick",function(B){return d(l),f(m.onClickOutside(B))})("detach",function(){return d(l),f(m.hide())})("positionChange",function(B){return d(l),f(m.onPositionChange(B))})}i&2&&c("cdkConnectedOverlayHasBackdrop",m.nzBackdrop)("cdkConnectedOverlayOrigin",m.origin)("cdkConnectedOverlayPositions",m._positions)("cdkConnectedOverlayOpen",m._visible)("cdkConnectedOverlayPush",m.cdkConnectedOverlayPush)("nzArrowPointAtCenter",m.nzArrowPointAtCenter)},dependencies:[Be,Ue,Le,Re,$e,qe,Ve,Xe,Ge,Q,A,W,U,F,I,nn,en],encapsulation:2,data:{animation:[je]},changeDetection:0})}return n})(),Vn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=S({type:n});static \u0275inj=D({imports:[Bn]})}return n})();function ot(n,t){if(n&1){let e=x();a(0,"tr")(1,"td"),s(2),r(),a(3,"td"),s(4),r(),a(5,"td"),s(6),r(),a(7,"td"),s(8),r(),a(9,"td")(10,"nz-tag",7),s(11),r()(),a(12,"td")(13,"nz-badge",8),_("click",function(){let m=d(e).$implicit,l=g();return f(l.onToggleActive(m))}),r()(),a(14,"td")(15,"a",9),_("click",function(){let m=d(e).$implicit,l=g();return f(l.onEditUser(m.id))}),p(16,"i",10),r(),a(17,"a",9),_("click",function(){let m=d(e).$implicit,l=g();return f(l.onToggleActive(m))}),p(18,"i",11),r(),a(19,"a",12),_("click",function(){let m=d(e).$implicit,l=g();return f(l.onDeleteUser(m.id))}),p(20,"i",13),r()()()}if(n&2){let e=t.$implicit;o(2),P(e.id),o(2),P(e.user_information.full_name),o(2),P(e.email),o(2),P(e.user_information.phone_number),o(2),c("nzColor",e.user_role==="supper_admin"?"red":"blue"),o(),M(" ",e.user_role," "),o(2),c("nzStatus",e.is_active?"success":"error")("nzText",e.is_active?"Ho\u1EA1t \u0111\u1ED9ng":"Kh\xF4ng ho\u1EA1t \u0111\u1ED9ng"),o(2),c("nzTooltipTitle","Ch\u1EC9nh s\u1EEDa"),o(2),c("nzTooltipTitle",e.is_active?"H\u1EE7y k\xEDch ho\u1EA1t":"K\xEDch ho\u1EA1t"),o(),Ce("color",e.is_active?"#ff4d4f":"#52c41a"),c("nzType",e.is_active?"stop":"play-circle")}}var ee=class n{constructor(t,e,i,m){this.userService=t;this.message=e;this.modal=i;this.router=m}users=[];loading=!1;ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.userService.getUsers().pipe(O(()=>this.loading=!1)).subscribe({next:t=>{this.users=t.data},error:t=>{this.message.error("C\xF3 l\u1ED7i x\u1EA3y ra khi t\u1EA3i danh s\xE1ch ng\u01B0\u1EDDi d\xF9ng"),console.error("Error:",t)}})}onAddUser(){this.router.navigate(["/users/create"])}onEditUser(t){this.router.navigate(["/users/edit",t])}onDeleteUser(t){this.modal.confirm({nzTitle:"X\xE1c nh\u1EADn x\xF3a",nzContent:"B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a ng\u01B0\u1EDDi d\xF9ng n\xE0y?",nzOkText:"X\xF3a",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>this.deleteUser(t),nzCancelText:"H\u1EE7y"})}deleteUser(t){this.loading=!0,this.userService.deleteUser(t).pipe(O(()=>this.loading=!1)).subscribe({next:e=>{e.meta.error?this.message.error(e.meta.message||"X\xF3a th\u1EA5t b\u1EA1i!"):(this.message.success("X\xF3a ng\u01B0\u1EDDi d\xF9ng th\xE0nh c\xF4ng!"),this.loadUsers())},error:e=>{this.message.error("C\xF3 l\u1ED7i x\u1EA3y ra khi x\xF3a ng\u01B0\u1EDDi d\xF9ng"),console.error("Error:",e)}})}onToggleActive(t){let e=t.is_active?"h\u1EE7y k\xEDch ho\u1EA1t":"k\xEDch ho\u1EA1t";this.modal.confirm({nzTitle:`X\xE1c nh\u1EADn ${e}`,nzContent:`B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n ${e} t\xE0i kho\u1EA3n n\xE0y?`,nzOkText:"X\xE1c nh\u1EADn",nzOkType:"primary",nzOnOk:()=>this.toggleUserActive(t),nzCancelText:"H\u1EE7y"})}toggleUserActive(t){this.loading=!0,this.userService.toggleUserActive(t.id).pipe(O(()=>this.loading=!1)).subscribe({next:e=>{if(e.meta.error)this.message.error(e.meta.message||"Thao t\xE1c th\u1EA5t b\u1EA1i!");else{let i=t.is_active?"h\u1EE7y k\xEDch ho\u1EA1t":"k\xEDch ho\u1EA1t";this.message.success(`${i} t\xE0i kho\u1EA3n th\xE0nh c\xF4ng!`),this.loadUsers()}},error:e=>{this.message.error("C\xF3 l\u1ED7i x\u1EA3y ra khi th\u1EF1c hi\u1EC7n thao t\xE1c"),console.error("Error:",e)}})}static \u0275fac=function(e){return new(e||n)(C(Z),C(J),C(kn),C(H))};static \u0275cmp=N({type:n,selectors:[["app-list-user"]],standalone:!1,decls:28,vars:4,consts:[["basicTable",""],[1,"users-page"],[1,"page-header"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[3,"nzData","nzLoading","nzShowSizeChanger"],[4,"ngFor","ngForOf"],[3,"nzColor"],[1,"status-badge",3,"click","nzStatus","nzText"],["nz-tooltip","",1,"action-link",3,"click","nzTooltipTitle"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzTheme","outline",3,"nzType"],["nz-tooltip","","nzTooltipTitle","X\xF3a",1,"action-link",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",2,"color","#ff4d4f"]],template:function(e,i){if(e&1){let m=x();a(0,"div",1)(1,"div",2)(2,"h1"),s(3,"Qu\u1EA3n l\xFD ng\u01B0\u1EDDi d\xF9ng"),r(),a(4,"button",3),_("click",function(){return d(m),f(i.onAddUser())}),p(5,"i",4),s(6," Th\xEAm ng\u01B0\u1EDDi d\xF9ng "),r()(),a(7,"nz-card")(8,"nz-table",5,0)(10,"thead")(11,"tr")(12,"th"),s(13,"ID"),r(),a(14,"th"),s(15,"H\u1ECD t\xEAn"),r(),a(16,"th"),s(17,"Email"),r(),a(18,"th"),s(19,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),r(),a(20,"th"),s(21,"Vai tr\xF2"),r(),a(22,"th"),s(23,"Tr\u1EA1ng th\xE1i"),r(),a(24,"th"),s(25,"Thao t\xE1c"),r()()(),a(26,"tbody"),u(27,ot,21,13,"tr",6),r()()()()}if(e&2){let m=h(9);o(8),c("nzData",i.users)("nzLoading",i.loading)("nzShowSizeChanger",!0),o(19),c("ngForOf",m.data)}},dependencies:[Pe,sn,an,mn,pn,cn,ln,U,F,I,K,A,dn,yn,zn],styles:[".users-page[_ngcontent-%COMP%]{padding:24px}.users-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.users-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px}.users-page[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{margin-bottom:24px}.users-page[_ngcontent-%COMP%]   .ant-table-wrapper[_ngcontent-%COMP%]{background:#fff}.users-page[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{cursor:pointer}.users-page[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]:hover{opacity:.8}.users-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]{margin-right:12px;font-size:16px;cursor:pointer;transition:opacity .3s}.users-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]:hover{opacity:.8}.users-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]:last-child{margin-right:0}.users-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s}.users-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}"]})};function rt(n,t){n&1&&p(0,"i",41)}function at(n,t){n&1&&(E(0),s(1,"Vui l\xF2ng nh\u1EADp email!"),T())}function mt(n,t){n&1&&(E(0),s(1,"Email kh\xF4ng h\u1EE3p l\u1EC7!"),T())}function ct(n,t){if(n&1&&u(0,at,2,0,"ng-container",42)(1,mt,2,0,"ng-container",42),n&2){let e=t.$implicit;c("ngIf",e.hasError("required")),o(),c("ngIf",e.hasError("email"))}}function st(n,t){n&1&&p(0,"i",45)}function lt(n,t){if(n&1){let e=x();a(0,"i",46),_("click",function(){d(e);let m=g(2);return f(m.passwordVisible=!m.passwordVisible)}),r()}if(n&2){let e=g(2);c("nzType",e.passwordVisible?"eye-invisible":"eye")}}function pt(n,t){n&1&&(E(0),s(1,"Vui l\xF2ng nh\u1EADp m\u1EADt kh\u1EA9u!"),T())}function ut(n,t){n&1&&(E(0),s(1,"M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1!"),T())}function dt(n,t){if(n&1&&u(0,pt,2,0,"ng-container",42)(1,ut,2,0,"ng-container",42),n&2){let e=t.$implicit;c("ngIf",e.hasError("required")),o(),c("ngIf",e.hasError("minlength"))}}function ft(n,t){if(n&1&&(a(0,"div",16)(1,"div",17)(2,"nz-form-item")(3,"nz-form-label",18),s(4,"M\u1EADt kh\u1EA9u"),r(),a(5,"nz-form-control",19)(6,"nz-input-group",43),p(7,"input",44),r(),u(8,st,1,0,"ng-template",null,5,v)(10,lt,1,1,"ng-template",null,6,v)(12,dt,2,2,"ng-template",null,7,v),r()()()()),n&2){let e=h(9),i=h(11),m=h(13),l=g();c("nzGutter",24),o(),c("nzXs",24)("nzSm",24)("nzMd",12),o(4),c("nzErrorTip",m),o(),c("nzSuffix",i)("nzPrefix",e),o(),c("type",l.passwordVisible?"text":"password")}}function gt(n,t){n&1&&p(0,"i",47)}function zt(n,t){n&1&&p(0,"i",48)}function _t(n,t){n&1&&p(0,"i",49)}var X=class n{constructor(t,e,i,m,l){this.fb=t;this.userService=e;this.message=i;this.router=m;this.route=l}userForm;isEdit=!1;loading=!1;userId;passwordVisible=!1;ngOnInit(){this.checkEditMode(),this.initForm()}initForm(){this.userForm=this.fb.group({email:["",[b.required,b.email]],password:[""],user_role:["user",[b.required]],user_information:this.fb.group({full_name:["",[b.required]],phone_number:["",[b.required]],address:[""],dob:[null]})}),this.updatePasswordValidation()}updatePasswordValidation(){let t=this.userForm.get("password");t&&(this.isEdit?t.clearValidators():t.setValidators([b.required,b.minLength(6)]),t.updateValueAndValidity())}checkEditMode(){let t=this.route.snapshot.params.id;t&&(this.isEdit=!0,this.userId=+t,this.loadUserData())}loadUserData(){this.userId&&(this.loading=!0,this.userService.getUserById(this.userId).pipe(O(()=>this.loading=!1)).subscribe({next:t=>{if(t.data){let e=t.data;this.userForm.patchValue({email:e.email,user_role:e.user_role,user_information:{full_name:e.user_information.full_name,phone_number:e.user_information.phone_number,address:e.user_information.address,dob:e.user_information.dob?new Date(e.user_information.dob):null}})}},error:t=>{this.message.error("C\xF3 l\u1ED7i khi t\u1EA3i th\xF4ng tin ng\u01B0\u1EDDi d\xF9ng"),console.error("Error loading user:",t),this.router.navigate(["/users"])}}))}onSubmit(){if(this.userForm.valid){this.loading=!0;let t=this.userForm.value;if(this.isEdit&&this.userId){let e={email:t.email,user_role:t.user_role,user_information:t.user_information};t.password&&(e.password=t.password),this.userService.updateUser(this.userId,e).pipe(O(()=>this.loading=!1)).subscribe({next:i=>{i.meta.error?this.message.error(i.meta.message||"C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i!"):(this.message.success("C\u1EADp nh\u1EADt th\xF4ng tin th\xE0nh c\xF4ng!"),this.router.navigate(["/users"]))},error:i=>{this.message.error("C\xF3 l\u1ED7i x\u1EA3y ra khi c\u1EADp nh\u1EADt ng\u01B0\u1EDDi d\xF9ng!"),console.error("Error:",i)}})}else{let e=t;this.userService.createUser(e).pipe(O(()=>this.loading=!1)).subscribe({next:i=>{i.meta.error?this.message.error(i.meta.message||"Th\xEAm m\u1EDBi th\u1EA5t b\u1EA1i!"):(this.message.success("Th\xEAm ng\u01B0\u1EDDi d\xF9ng th\xE0nh c\xF4ng!"),this.router.navigate(["/users"]))},error:i=>{this.message.error("C\xF3 l\u1ED7i x\u1EA3y ra khi th\xEAm ng\u01B0\u1EDDi d\xF9ng!"),console.error("Error:",i)}})}}else Object.values(this.userForm.controls).forEach(t=>{t.invalid&&t.markAsTouched()})}onCancel(){this.router.navigate(["/users"])}static \u0275fac=function(e){return new(e||n)(C(Se),C(Z),C(J),C(H),C(Fe))};static \u0275cmp=N({type:n,selectors:[["app-user-form"]],standalone:!1,decls:77,vars:35,consts:[["emailPrefix",""],["emailErrorTpl",""],["userPrefix",""],["phonePrefix",""],["addressPrefix",""],["passwordPrefix",""],["suffixTemplate",""],["passwordErrorTpl",""],[1,"user-form-page"],[1,"page-header"],[1,"header-content"],[1,"description"],[1,"form-container"],[3,"nzLoading"],["nz-form","",3,"ngSubmit","formGroup","nzLayout"],["nzText","Th\xF4ng tin t\xE0i kho\u1EA3n","nzOrientation","left"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzSm","nzMd"],["nzRequired",""],[3,"nzErrorTip"],[3,"nzPrefix"],["nz-input","","formControlName","email","placeholder","Nh\u1EADp email"],["nzErrorTip","Vui l\xF2ng ch\u1ECDn vai tr\xF2!"],["formControlName","user_role","nzPlaceHolder","Ch\u1ECDn vai tr\xF2"],["nzValue","supper_admin","nzLabel","Super Admin"],["nzValue","admin","nzLabel","Admin"],["nzValue","user","nzLabel","User"],["nz-row","",3,"nzGutter",4,"ngIf"],["nzText","Th\xF4ng tin c\xE1 nh\xE2n","nzOrientation","left"],["formGroupName","user_information"],["nzErrorTip","Vui l\xF2ng nh\u1EADp h\u1ECD t\xEAn!"],["nz-input","","formControlName","full_name","placeholder","Nh\u1EADp h\u1ECD t\xEAn"],["nzErrorTip","Vui l\xF2ng nh\u1EADp s\u1ED1 \u0111i\u1EC7n tho\u1EA1i!"],["nz-input","","formControlName","phone_number","placeholder","Nh\u1EADp s\u1ED1 \u0111i\u1EC7n tho\u1EA1i"],["nz-input","","formControlName","address","placeholder","Nh\u1EADp \u0111\u1ECBa ch\u1EC9"],["formControlName","dob","nzFormat","dd/MM/yyyy",2,"width","100%",3,"nzPlaceHolder"],[1,"form-actions"],["nz-button","","nzType","default","type","button",3,"click"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-button","","nzType","primary","type","submit",3,"nzLoading"],["nz-icon","","nzType","save","nzTheme","outline"],["nz-icon","","nzType","mail","nzTheme","outline"],[4,"ngIf"],[3,"nzSuffix","nzPrefix"],["nz-input","","formControlName","password","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u",3,"type"],["nz-icon","","nzType","lock","nzTheme","outline"],["nz-icon","",3,"click","nzType"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-icon","","nzType","phone","nzTheme","outline"],["nz-icon","","nzType","environment","nzTheme","outline"]],template:function(e,i){if(e&1){let m=x();a(0,"div",8)(1,"div",9)(2,"div",10)(3,"h1"),s(4),r(),a(5,"p",11),s(6),r()()(),a(7,"div",12)(8,"nz-card",13)(9,"form",14),_("ngSubmit",function(){return d(m),f(i.onSubmit())}),p(10,"nz-divider",15),a(11,"div",16)(12,"div",17)(13,"nz-form-item")(14,"nz-form-label",18),s(15,"Email"),r(),a(16,"nz-form-control",19)(17,"nz-input-group",20),p(18,"input",21),r(),u(19,rt,1,0,"ng-template",null,0,v)(21,ct,2,2,"ng-template",null,1,v),r()()(),a(23,"div",17)(24,"nz-form-item")(25,"nz-form-label",18),s(26,"Vai tr\xF2"),r(),a(27,"nz-form-control",22)(28,"nz-select",23),p(29,"nz-option",24)(30,"nz-option",25)(31,"nz-option",26),r()()()()(),u(32,ft,14,8,"div",27),p(33,"nz-divider",28),a(34,"div",29)(35,"div",16)(36,"div",17)(37,"nz-form-item")(38,"nz-form-label",18),s(39,"H\u1ECD t\xEAn"),r(),a(40,"nz-form-control",30)(41,"nz-input-group",20),p(42,"input",31),r(),u(43,gt,1,0,"ng-template",null,2,v),r()()(),a(45,"div",17)(46,"nz-form-item")(47,"nz-form-label",18),s(48,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),r(),a(49,"nz-form-control",32)(50,"nz-input-group",20),p(51,"input",33),r(),u(52,zt,1,0,"ng-template",null,3,v),r()()()(),a(54,"div",16)(55,"div",17)(56,"nz-form-item")(57,"nz-form-label"),s(58,"\u0110\u1ECBa ch\u1EC9"),r(),a(59,"nz-form-control")(60,"nz-input-group",20),p(61,"input",34),r(),u(62,_t,1,0,"ng-template",null,4,v),r()()(),a(64,"div",17)(65,"nz-form-item")(66,"nz-form-label"),s(67,"Ng\xE0y sinh"),r(),a(68,"nz-form-control"),p(69,"nz-date-picker",35),r()()()()(),a(70,"div",36)(71,"button",37),_("click",function(){return d(m),f(i.onCancel())}),p(72,"i",38),s(73," H\u1EE7y "),r(),a(74,"button",39),p(75,"i",40),s(76),r()()()()()()}if(e&2){let m=h(20),l=h(22),k=h(44),B=h(53),y=h(63);o(4),P(i.isEdit?"Ch\u1EC9nh s\u1EEDa ng\u01B0\u1EDDi d\xF9ng":"Th\xEAm ng\u01B0\u1EDDi d\xF9ng m\u1EDBi"),o(2),P(i.isEdit?"C\u1EADp nh\u1EADt th\xF4ng tin ng\u01B0\u1EDDi d\xF9ng trong h\u1EC7 th\u1ED1ng":"T\u1EA1o t\xE0i kho\u1EA3n m\u1EDBi cho ng\u01B0\u1EDDi d\xF9ng trong h\u1EC7 th\u1ED1ng"),o(2),c("nzLoading",i.loading),o(),c("formGroup",i.userForm)("nzLayout","vertical"),o(2),c("nzGutter",24),o(),c("nzXs",24)("nzSm",24)("nzMd",12),o(4),c("nzErrorTip",l),o(),c("nzPrefix",m),o(6),c("nzXs",24)("nzSm",24)("nzMd",12),o(9),c("ngIf",!i.isEdit),o(3),c("nzGutter",24),o(),c("nzXs",24)("nzSm",24)("nzMd",12),o(5),c("nzPrefix",k),o(4),c("nzXs",24)("nzSm",24)("nzMd",12),o(5),c("nzPrefix",B),o(4),c("nzGutter",24),o(),c("nzXs",24)("nzSm",24)("nzMd",12),o(5),c("nzPrefix",y),o(4),c("nzXs",24)("nzSm",24)("nzMd",12),o(5),c("nzPlaceHolder","Ch\u1ECDn ng\xE0y sinh"),o(5),c("nzLoading",i.loading),o(2),M(" ",i.isEdit?"C\u1EADp nh\u1EADt":"Th\xEAm m\u1EDBi"," ")}},dependencies:[xe,be,ye,Ee,Te,ke,Ne,De,U,F,I,K,A,Je,Ze,vn,hn,Pn,On,He,We,Qe,tn,on,Tn,Nn],styles:[".user-form-page[_ngcontent-%COMP%]{min-height:calc(100vh - 64px);background-color:#f5f5f5}.user-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{background:#fff;padding:16px 24px;border-radius:8px;box-shadow:0 1px 2px #00000008;margin-bottom:12px}.user-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#262626}.user-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:8px 0 0;color:#8c8c8c;font-size:14px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 1px 2px #00000008}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]     .ant-card-body{padding:32px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{margin:32px 0}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]     .ant-divider-inner-text{font-size:16px;font-weight:500;color:#262626}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]{margin-bottom:12px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-form-item-label{padding-bottom:8px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-form-item-label label{font-size:14px;font-weight:500;color:#262626}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-form-item-label label:before{margin-right:4px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-input{padding:8px 12px;border-radius:6px;border-color:#d9d9d9}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-input:hover, .user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-input:focus{border-color:#1890ff}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-select:not(.ant-select-disabled) .ant-select-selector{padding:8px 12px;border-radius:6px;border-color:#d9d9d9;height:auto}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-select:not(.ant-select-disabled) .ant-select-selector:hover{border-color:#1890ff}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-picker{padding:8px 12px;border-radius:6px;width:100%;border-color:#d9d9d9}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]     .ant-picker:hover{border-color:#1890ff}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:40px;padding-top:24px;border-top:1px solid #f0f0f0;display:flex;justify-content:flex-end;gap:12px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;height:40px;border-radius:6px;font-weight:500}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;font-size:16px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=default][_ngcontent-%COMP%]{border-color:#d9d9d9}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=default][_ngcontent-%COMP%]:hover{color:#1890ff;border-color:#1890ff}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=primary][_ngcontent-%COMP%]{background:#1890ff}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=primary][_ngcontent-%COMP%]:hover{background:#40a9ff}@media (max-width: 575px){.user-form-page[_ngcontent-%COMP%]{padding:16px}.user-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:16px;margin-bottom:16px}.user-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]     .ant-card-body{padding:16px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{margin:24px 0}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]{margin-bottom:16px}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:32px;padding-top:16px;flex-direction:column-reverse}.user-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:0}}"]})};var Ct=[{path:"",component:ee},{path:"create",component:X},{path:"edit/:id",component:X}],ne=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=S({type:n});static \u0275inj=D({imports:[G.forChild(Ct),G]})};var Rn=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=S({type:n});static \u0275inj=D({imports:[Me,G,we,Ae,ne,un,W,Ye,Q,fn,En,Mn,xn,Ke,rn,bn,Dn,Vn,Sn,Cn,wn]})};export{Rn as UsersModule};
