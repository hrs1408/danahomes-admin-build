import{a as Nt,c as Ft}from"./chunk-3A4S542K.js";import{q as ft,r as ht,s as Ct,t as Mt,u as vt,v as _t,w as zt}from"./chunk-CORX4QBY.js";import"./chunk-RM5VI7OX.js";import{c as S,d as ut}from"./chunk-SOSM2LKK.js";import{Aa as y,Ba as mt,Ta as gt,Wa as pt,Xa as st,Ya as lt,Za as dt,l as W,m as P,mb as Ot,n as Q,o as J,ob as Pt,pb as Tt,q as Y,qb as bt,r as Z,rb as xt,sb as Et,t as tt,tb as yt,u as et,v as nt,w as ot,wb as St,x as at,xa as x,xb as N,ya as E}from"./chunk-7TR27V3C.js";import{$b as X,$c as T,Bb as L,Cc as U,Eb as h,Gb as $,Kc as H,Q as d,Qa as i,Rb as q,Sb as a,Tb as l,Ua as g,Ub as V,Uc as K,Za as _,Zc as it,_a as z,_b as G,ad as rt,cd as C,da as w,db as j,ea as v,ga as A,hb as m,ib as O,le as b,me as ct,pa as R,qa as B,vb as n,wb as o,xb as s}from"./chunk-TL4RQCWV.js";var u=class c{constructor(t){this.http=t}apiUrl=`${at.apiUrl}tag`;getTags(){return this.http.get(`${this.apiUrl}/get-all`)}getTagById(t){return this.http.get(`${this.apiUrl}/get-by-id/${t}`)}createTag(t){return this.http.post(`${this.apiUrl}/create`,t)}updateTag(t,e){return this.http.put(`${this.apiUrl}/update/${t}`,e)}deleteTag(t){return this.http.delete(`${this.apiUrl}/delete/${t}`)}static \u0275fac=function(e){return new(e||c)(A(K))};static \u0275prov=w({token:c,factory:c.\u0275fac,providedIn:"root"})};var qt=()=>["create"],Vt=c=>[c,"edit"];function Gt(c,t){if(c&1){let e=L();n(0,"tr")(1,"td"),a(2),o(),n(3,"td"),a(4),o(),n(5,"td"),a(6),o(),n(7,"td")(8,"div",7)(9,"span",8),a(10),o()()(),n(11,"td")(12,"a",9),s(13,"i",10),o(),n(14,"a",11),h("click",function(){let p=R(e).$implicit,f=$();return B(f.onDeleteTag(p.id))}),s(15,"i",12),o()()()}if(c&2){let e=t.$implicit;i(2),l(e.id),i(2),l(e.name),i(2),l(e.slug),i(2),O("background-color",e.color),i(2),l(e.color),i(2),m("routerLink",X(7,Vt,e.id))}}var D=class c{constructor(t,e,r,p){this.tagService=t;this.message=e;this.modal=r;this.router=p}tags=[];loading=!1;ngOnInit(){this.loadTags()}loadTags(){this.loading=!0,this.tagService.getTags().pipe(d(()=>this.loading=!1)).subscribe({next:t=>{t.meta.error?this.message.error("Kh\xF4ng th\u1EC3 t\u1EA3i danh s\xE1ch th\u1EBB"):this.tags=t.data},error:t=>{this.message.error("C\xF3 l\u1ED7i khi t\u1EA3i danh s\xE1ch th\u1EBB"),console.error("Error:",t)}})}onDeleteTag(t){this.modal.confirm({nzTitle:"X\xE1c nh\u1EADn x\xF3a",nzContent:"B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a th\u1EBB n\xE0y?",nzOkText:"X\xF3a",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>this.deleteTag(t),nzCancelText:"H\u1EE7y"})}deleteTag(t){this.loading=!0,this.tagService.deleteTag(t).pipe(d(()=>this.loading=!1)).subscribe({next:e=>{e.meta.error?this.message.error(e.meta.message||"X\xF3a th\u1EBB th\u1EA5t b\u1EA1i!"):(this.message.success("X\xF3a th\u1EBB th\xE0nh c\xF4ng!"),this.loadTags())},error:e=>{this.message.error("C\xF3 l\u1ED7i x\u1EA3y ra khi x\xF3a th\u1EBB!"),console.error("Error:",e)}})}static \u0275fac=function(e){return new(e||c)(g(u),g(N),g(Nt),g(T))};static \u0275cmp=_({type:c,selectors:[["app-list-tag"]],standalone:!1,decls:24,vars:6,consts:[["basicTable",""],[1,"tags-page"],[1,"page-header"],["nz-button","","nzType","primary",3,"routerLink"],["nz-icon","","nzType","plus"],[3,"nzData","nzLoading","nzShowSizeChanger"],[4,"ngFor","ngForOf"],[1,"color-preview"],[1,"color-value"],["nz-tooltip","","nzTooltipTitle","Ch\u1EC9nh s\u1EEDa",1,"action-link",3,"routerLink"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-tooltip","","nzTooltipTitle","X\xF3a",1,"action-link",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",2,"color","#ff4d4f"]],template:function(e,r){if(e&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),a(3,"Qu\u1EA3n l\xFD th\u1EBB"),o(),n(4,"button",3),s(5,"i",4),a(6," Th\xEAm th\u1EBB "),o()(),n(7,"nz-card")(8,"nz-table",5,0)(10,"thead")(11,"tr")(12,"th"),a(13,"ID"),o(),n(14,"th"),a(15,"T\xEAn th\u1EBB"),o(),n(16,"th"),a(17,"Slug"),o(),n(18,"th"),a(19,"M\xE0u s\u1EAFc"),o(),n(20,"th"),a(21,"Thao t\xE1c"),o()()(),n(22,"tbody"),j(23,Gt,16,9,"tr",6),o()()()()),e&2){let p=q(9);i(4),m("routerLink",G(5,qt)),i(4),m("nzData",r.tags)("nzLoading",r.loading)("nzShowSizeChanger",!0),i(15),m("ngForOf",p.data)}},dependencies:[U,rt,y,x,E,b,S,Mt,ft,ht,_t,Ct,vt,Ot],styles:[".tags-page[_ngcontent-%COMP%]{padding:24px}.tags-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.tags-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#262626}.tags-page[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{margin-bottom:24px}.tags-page[_ngcontent-%COMP%]   .ant-table-wrapper[_ngcontent-%COMP%]{background:#fff}.tags-page[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{width:80px;height:32px;border-radius:4px;border:1px solid #d9d9d9;display:flex;align-items:center;justify-content:center}.tags-page[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]   .color-value[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5);font-size:12px;font-family:monospace}.tags-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]{margin-right:12px;font-size:16px;cursor:pointer;transition:opacity .3s}.tags-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]:hover{opacity:.8}.tags-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]:last-child{margin-right:0}.tags-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s}.tags-page[_ngcontent-%COMP%]   .action-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}"]})};var M=class c{constructor(t,e,r,p,f){this.fb=t;this.tagService=e;this.message=r;this.router=p;this.route=f}tagForm;isEdit=!1;loading=!1;tagId;ngOnInit(){this.initForm(),this.checkEditMode()}initForm(){this.tagForm=this.fb.group({name:["",[P.required]],slug:["",[P.required]],color:["#1890ff",[P.required]]})}checkEditMode(){let t=this.route.snapshot.params.id;t&&(this.isEdit=!0,this.tagId=+t,this.loadTagData())}loadTagData(){this.tagId&&(this.loading=!0,this.tagService.getTagById(this.tagId).pipe(d(()=>this.loading=!1)).subscribe({next:t=>{if(!t.meta.error&&t.data){let e=t.data;this.tagForm.patchValue({name:e.name,slug:e.slug,color:e.color})}else this.message.error("Kh\xF4ng th\u1EC3 t\u1EA3i th\xF4ng tin th\u1EBB"),this.router.navigate(["/tags"])},error:t=>{this.message.error("C\xF3 l\u1ED7i khi t\u1EA3i th\xF4ng tin th\u1EBB"),console.error("Error:",t),this.router.navigate(["/tags"])}}))}onSubmit(){if(this.tagForm.valid){this.loading=!0;let t=this.tagForm.value;(this.isEdit&&this.tagId?this.tagService.updateTag(this.tagId,t):this.tagService.createTag(t)).pipe(d(()=>this.loading=!1)).subscribe({next:r=>{r.meta.error?this.message.error(r.meta.message||"Thao t\xE1c th\u1EA5t b\u1EA1i!"):(this.message.success(this.isEdit?"C\u1EADp nh\u1EADt th\u1EBB th\xE0nh c\xF4ng!":"Th\xEAm th\u1EBB th\xE0nh c\xF4ng!"),this.router.navigate(["/tags"]))},error:r=>{this.message.error("C\xF3 l\u1ED7i x\u1EA3y ra khi th\u1EF1c hi\u1EC7n thao t\xE1c!"),console.error("Error:",r)}})}else Object.values(this.tagForm.controls).forEach(t=>{t.invalid&&t.markAsTouched()})}onCancel(){this.router.navigate(["/tags"])}static \u0275fac=function(e){return new(e||c)(g(et),g(u),g(N),g(T),g(it))};static \u0275cmp=_({type:c,selectors:[["app-tag-form"]],standalone:!1,decls:39,vars:19,consts:[[1,"tag-form-page"],[1,"page-header"],[1,"header-content"],[1,"description"],[1,"form-container"],[3,"nzLoading"],["nz-form","",3,"ngSubmit","formGroup","nzLayout"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzSm","nzMd"],["nzRequired",""],["nzErrorTip","Vui l\xF2ng nh\u1EADp t\xEAn th\u1EBB!"],["nz-input","","formControlName","name","placeholder","Nh\u1EADp t\xEAn th\u1EBB"],["nzErrorTip","Vui l\xF2ng nh\u1EADp slug!"],["nz-input","","formControlName","slug","placeholder","Nh\u1EADp slug"],["nzErrorTip","Vui l\xF2ng ch\u1ECDn m\xE0u s\u1EAFc!"],[1,"color-picker-container"],[1,"color-preview"],[1,"color-value"],["nz-input","","type","color","formControlName","color",1,"color-input",3,"value"],[1,"form-actions"],["nz-button","","nzType","default","type","button",3,"click"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-button","","nzType","primary","type","submit",3,"nzLoading"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4),o(),n(5,"p",3),a(6),o()()(),n(7,"div",4)(8,"nz-card",5)(9,"form",6),h("ngSubmit",function(){return r.onSubmit()}),n(10,"div",7)(11,"div",8)(12,"nz-form-item")(13,"nz-form-label",9),a(14,"T\xEAn th\u1EBB"),o(),n(15,"nz-form-control",10),s(16,"input",11),o()()(),n(17,"div",8)(18,"nz-form-item")(19,"nz-form-label",9),a(20,"Slug"),o(),n(21,"nz-form-control",12),s(22,"input",13),o()()()(),n(23,"nz-form-item")(24,"nz-form-label",9),a(25,"M\xE0u s\u1EAFc"),o(),n(26,"nz-form-control",14)(27,"div",15)(28,"div",16)(29,"span",17),a(30),o()(),s(31,"input",18),o()()(),n(32,"div",19)(33,"button",20),h("click",function(){return r.onCancel()}),s(34,"i",21),a(35," H\u1EE7y "),o(),n(36,"button",22),s(37,"i",23),a(38),o()()()()()()),e&2){let p,f,I;i(4),l(r.isEdit?"Ch\u1EC9nh s\u1EEDa th\u1EBB":"Th\xEAm th\u1EBB m\u1EDBi"),i(2),l(r.isEdit?"C\u1EADp nh\u1EADt th\xF4ng tin th\u1EBB":"T\u1EA1o th\u1EBB m\u1EDBi trong h\u1EC7 th\u1ED1ng"),i(2),m("nzLoading",r.loading),i(),m("formGroup",r.tagForm)("nzLayout","vertical"),i(),m("nzGutter",24),i(),m("nzXs",24)("nzSm",24)("nzMd",12),i(6),m("nzXs",24)("nzSm",24)("nzMd",12),i(11),O("background-color",(p=r.tagForm.get("color"))==null?null:p.value),i(2),l((f=r.tagForm.get("color"))==null?null:f.value),i(),m("value",(I=r.tagForm.get("color"))==null?null:I.value),i(5),m("nzLoading",r.loading),i(),m("nzType",r.isEdit?"save":"plus"),i(),V(" ",r.isEdit?"C\u1EADp nh\u1EADt":"Th\xEAm m\u1EDBi"," ")}},dependencies:[Y,W,Q,J,Z,tt,lt,st,bt,Tt,Et,xt,gt,y,x,E,b,S],styles:[".tag-form-page[_ngcontent-%COMP%]{padding:24px}.tag-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{background:#fff;padding:16px 24px;border-radius:8px;box-shadow:0 1px 2px #00000008;margin-bottom:24px}.tag-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#262626}.tag-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:8px 0 0;color:#8c8c8c;font-size:14px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 1px 2px #00000008}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]     .ant-card-body{padding:24px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{width:100px;height:40px;border-radius:6px;border:1px solid #d9d9d9;display:flex;align-items:center;justify-content:center}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]   .color-value[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5);font-size:14px;font-family:monospace}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{width:60px;height:40px;padding:0;border:none;background:none;cursor:pointer}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]::-webkit-color-swatch{border:1px solid #d9d9d9;border-radius:6px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:24px;padding-top:24px;border-top:1px solid #f0f0f0;display:flex;justify-content:flex-end;gap:12px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;height:40px;border-radius:6px;font-weight:500}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;font-size:16px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=default][_ngcontent-%COMP%]{border-color:#d9d9d9}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=default][_ngcontent-%COMP%]:hover{color:#1890ff;border-color:#1890ff}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=primary][_ngcontent-%COMP%]{background:#1890ff}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[nzType=primary][_ngcontent-%COMP%]:hover{background:#40a9ff}@media (max-width: 575px){.tag-form-page[_ngcontent-%COMP%]{padding:16px}.tag-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:16px;margin-bottom:16px}.tag-form-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]     .ant-card-body{padding:16px}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.tag-form-page[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:0}}"]})};var Xt=[{path:"",component:D},{path:"create",component:M},{path:":id/edit",component:M}],k=class c{static \u0275fac=function(e){return new(e||c)};static \u0275mod=z({type:c});static \u0275inj=v({imports:[C.forChild(Xt),C]})};var kt=class c{static \u0275fac=function(e){return new(e||c)};static \u0275mod=z({type:c});static \u0275inj=v({imports:[H,C,k,nt,ot,yt,pt,mt,ct,dt,ut,zt,Ft,St,Pt]})};export{kt as TagsModule};
